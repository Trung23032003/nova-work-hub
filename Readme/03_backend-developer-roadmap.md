# Lá»™ trÃ¬nh Backend Developer cho Fresher

> **Má»¥c tiÃªu**: TÃ i liá»‡u nÃ y cung cáº¥p lá»™ trÃ¬nh há»c táº­p chi tiáº¿t vÃ  cÃ¡c kiáº¿n thá»©c cá»‘t lÃµi mÃ  má»™t Backend Developer fresher cáº§n náº¯m vá»¯ng Ä‘á»ƒ lÃ m viá»‡c hiá»‡u quáº£ trong dá»± Ã¡n NovaWork Hub.

---

## ğŸ“‹ Má»¥c lá»¥c

1. [Tá»•ng quan vá» Backend Development](#1-tá»•ng-quan-vá»-backend-development)
2. [Kiáº¿n thá»©c ná»n táº£ng báº¯t buá»™c](#2-kiáº¿n-thá»©c-ná»n-táº£ng-báº¯t-buá»™c)
3. [Kiáº¿n thá»©c chuyÃªn sÃ¢u cho dá»± Ã¡n](#3-kiáº¿n-thá»©c-chuyÃªn-sÃ¢u-cho-dá»±-Ã¡n)
4. [Lá»™ trÃ¬nh há»c táº­p 3 thÃ¡ng](#4-lá»™-trÃ¬nh-há»c-táº­p-3-thÃ¡ng)
5. [TÃ i nguyÃªn há»c táº­p](#5-tÃ i-nguyÃªn-há»c-táº­p)
6. [Checklist Ä‘Ã¡nh giÃ¡ nÄƒng lá»±c](#6-checklist-Ä‘Ã¡nh-giÃ¡-nÄƒng-lá»±c)

---

## 1. Tá»•ng quan vá» Backend Development

### Backend Developer lÃ m gÃ¬?

Backend Developer chá»‹u trÃ¡ch nhiá»‡m xÃ¢y dá»±ng vÃ  duy trÃ¬ **pháº§n "sau háº­u trÆ°á»ng"** cá»§a á»©ng dá»¥ng:

| Nhiá»‡m vá»¥ | MÃ´ táº£ |
|----------|-------|
| **Xá»­ lÃ½ Logic nghiá»‡p vá»¥** | Viáº¿t code xá»­ lÃ½ cÃ¡c yÃªu cáº§u tá»« client (táº¡o user, xá»­ lÃ½ Ä‘Æ¡n hÃ ng, tÃ­nh toÃ¡n...) |
| **Quáº£n lÃ½ Database** | Thiáº¿t káº¿, truy váº¥n, vÃ  tá»‘i Æ°u cÆ¡ sá»Ÿ dá»¯ liá»‡u |
| **XÃ¡c thá»±c & PhÃ¢n quyá»n** | Äáº£m báº£o chá»‰ ngÆ°á»i dÃ¹ng há»£p lá»‡ má»›i truy cáº­p Ä‘Æ°á»£c tÃ i nguyÃªn |
| **XÃ¢y dá»±ng API** | Táº¡o cÃ¡c endpoint Ä‘á»ƒ Frontend giao tiáº¿p vá»›i Backend |
| **Báº£o máº­t** | Báº£o vá»‡ dá»¯ liá»‡u vÃ  ngÄƒn cháº·n cÃ¡c cuá»™c táº¥n cÃ´ng |

### Stack cÃ´ng nghá»‡ trong dá»± Ã¡n NovaWork Hub

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        FRONTEND                              â”‚
â”‚              Next.js 15 (React + TypeScript)                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                          â”‚ Server Actions / API Routes
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        BACKEND                               â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚   â”‚ Auth.js v5  â”‚  â”‚ Server Logic â”‚  â”‚  Zod Validation â”‚   â”‚
â”‚   â”‚ (XÃ¡c thá»±c)  â”‚  â”‚ (Nghiá»‡p vá»¥)  â”‚  â”‚  (Kiá»ƒm tra DL)  â”‚   â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                          â”‚ Prisma ORM
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                       DATABASE                               â”‚
â”‚                PostgreSQL (Supabase)                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 2. Kiáº¿n thá»©c ná»n táº£ng báº¯t buá»™c

### 2.1. TypeScript (â­â­â­â­â­ Quan trá»ng nháº¥t)

TypeScript lÃ  ngÃ´n ngá»¯ chÃ­nh cá»§a dá»± Ã¡n. Báº¡n **PHáº¢I** náº¯m vá»¯ng trÆ°á»›c khi há»c cÃ¡c pháº§n khÃ¡c.

#### CÃ¡c khÃ¡i niá»‡m cáº§n há»c:

```typescript
// 1. Basic Types
let name: string = "Trung";
let age: number = 22;
let isActive: boolean = true;

// 2. Interface - Äá»‹nh nghÄ©a cáº¥u trÃºc object
interface User {
  id: string;
  email: string;
  name: string;
  role: "ADMIN" | "PM" | "MEMBER"; // Union Types
  createdAt: Date;
}

// 3. Type Aliases
type UserRole = "ADMIN" | "PM" | "MEMBER";
type UserId = string;

// 4. Generics - Ráº¥t quan trá»ng cho Prisma
function getFirst<T>(arr: T[]): T | undefined {
  return arr[0];
}

// Sá»­ dá»¥ng
const firstUser = getFirst<User>(users);

// 5. Utility Types
type PartialUser = Partial<User>;        // Táº¥t cáº£ fields optional
type UserWithoutId = Omit<User, "id">;   // Bá» field id
type UserIdAndEmail = Pick<User, "id" | "email">; // Chá»‰ láº¥y id vÃ  email

// 6. Type Guards
function isAdmin(user: User): boolean {
  return user.role === "ADMIN";
}
```

#### Thá»i gian há»c: **1-2 tuáº§n**

#### Checklist:
- [ ] Hiá»ƒu sá»± khÃ¡c nhau giá»¯a `interface` vÃ  `type`
- [ ] Biáº¿t cÃ¡ch dÃ¹ng Generics
- [ ] ThÃ nh tháº¡o Utility Types: `Partial`, `Omit`, `Pick`, `Required`
- [ ] Hiá»ƒu Union Types vÃ  Intersection Types

---

### 2.2. SQL & CÆ¡ sá»Ÿ dá»¯ liá»‡u quan há»‡

#### CÃ¡c khÃ¡i niá»‡m cá»‘t lÃµi:

| KhÃ¡i niá»‡m | MÃ´ táº£ | VÃ­ dá»¥ |
|-----------|-------|-------|
| **Table** | Báº£ng chá»©a dá»¯ liá»‡u | `users`, `projects`, `tasks` |
| **Column** | Cá»™t/thuá»™c tÃ­nh cá»§a báº£ng | `id`, `email`, `name` |
| **Row** | Má»™t báº£n ghi/record | Má»™t user cá»¥ thá»ƒ |
| **Primary Key (PK)** | KhÃ³a chÃ­nh, Ä‘á»‹nh danh duy nháº¥t | `id` |
| **Foreign Key (FK)** | KhÃ³a ngoáº¡i, liÃªn káº¿t báº£ng | `project_id` trong báº£ng `tasks` |
| **Index** | ÄÃ¡nh chá»‰ má»¥c Ä‘á»ƒ truy váº¥n nhanh | Index trÃªn `email` |

#### CÃ¡c loáº¡i quan há»‡ (Relationships):

```
1. ONE-TO-ONE (1-1)
   User â”€â”€â”€â”€â”€â”€â”€â”€ Profile
   Má»™t user cÃ³ má»™t profile

2. ONE-TO-MANY (1-n)
   Project â”€â”€â”€â”€â”€â”€< Tasks
   Má»™t project cÃ³ nhiá»u tasks

3. MANY-TO-MANY (n-n)
   Users >â”€â”€â”€â”€â”€â”€â”€â”€< Projects
   Má»™t user tham gia nhiá»u projects
   Má»™t project cÃ³ nhiá»u users
```

#### CÃ¡c cÃ¢u lá»‡nh SQL cÆ¡ báº£n cáº§n biáº¿t:

```sql
-- SELECT: Láº¥y dá»¯ liá»‡u
SELECT * FROM users WHERE role = 'ADMIN';
SELECT id, name, email FROM users ORDER BY created_at DESC LIMIT 10;

-- INSERT: ThÃªm dá»¯ liá»‡u
INSERT INTO users (id, name, email, role) 
VALUES ('uuid-123', 'Trung', 'trung@email.com', 'MEMBER');

-- UPDATE: Cáº­p nháº­t dá»¯ liá»‡u
UPDATE users SET role = 'PM' WHERE id = 'uuid-123';

-- DELETE: XÃ³a dá»¯ liá»‡u
DELETE FROM users WHERE id = 'uuid-123';

-- JOIN: Káº¿t há»£p báº£ng
SELECT u.name, p.title 
FROM users u
JOIN project_members pm ON u.id = pm.user_id
JOIN projects p ON pm.project_id = p.id;
```

#### Thá»i gian há»c: **1 tuáº§n**

---

### 2.3. Git & Version Control

```bash
# CÃ¡c lá»‡nh cáº§n thuá»™c lÃ²ng
git clone <repo-url>          # Clone repo vá» mÃ¡y
git checkout -b feature/xyz   # Táº¡o branch má»›i
git add .                     # Stage táº¥t cáº£ thay Ä‘á»•i
git commit -m "feat: add..."  # Commit vá»›i message
git push origin feature/xyz   # Push lÃªn remote
git pull origin main          # Láº¥y code má»›i nháº¥t
git merge main                # Merge branch main vÃ o branch hiá»‡n táº¡i
git rebase main               # Rebase branch hiá»‡n táº¡i lÃªn main
```

#### Quy Æ°á»›c Commit Message:
```
feat: thÃªm tÃ­nh nÄƒng má»›i
fix: sá»­a lá»—i
refactor: tÃ¡i cáº¥u trÃºc code
docs: cáº­p nháº­t tÃ i liá»‡u
test: thÃªm/sá»­a test
chore: cÃ´ng viá»‡c khÃ¡c (config, dependencies)
```

---

## 3. Kiáº¿n thá»©c chuyÃªn sÃ¢u cho dá»± Ã¡n

### 3.1. Prisma ORM (â­â­â­â­â­)

Prisma lÃ  cáº§u ná»‘i giá»¯a TypeScript vÃ  PostgreSQL. ÄÃ¢y lÃ  cÃ´ng cá»¥ **quan trá»ng nháº¥t** cho Backend.

#### 3.1.1. Prisma Schema

File `prisma/schema.prisma` Ä‘á»‹nh nghÄ©a cáº¥u trÃºc database:

```prisma
// Cáº¥u hÃ¬nh datasource
datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

// Cáº¥u hÃ¬nh generator
generator client {
  provider = "prisma-client-js"
}

// Model User
model User {
  id        String   @id @default(cuid())
  email     String   @unique
  name      String
  password  String
  role      Role     @default(MEMBER)
  avatar    String?
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt

  // Relations
  projects  ProjectMember[]
  tasks     Task[]
  comments  Comment[]

  @@map("users") // TÃªn báº£ng trong DB
}

// Model Project
model Project {
  id          String   @id @default(cuid())
  title       String
  description String?
  status      ProjectStatus @default(ACTIVE)
  startDate   DateTime?
  endDate     DateTime?
  createdAt   DateTime @default(now())
  updatedAt   DateTime @updatedAt

  // Relations
  members     ProjectMember[]
  tasks       Task[]

  @@map("projects")
}

// Enum
enum Role {
  ADMIN
  PM
  MEMBER
}

enum ProjectStatus {
  ACTIVE
  COMPLETED
  ARCHIVED
}
```

#### 3.1.2. Prisma Client - CRUD Operations

```typescript
import { PrismaClient } from "@prisma/client";

const prisma = new PrismaClient();

// CREATE - Táº¡o má»›i
const newUser = await prisma.user.create({
  data: {
    email: "trung@email.com",
    name: "Trung Dang",
    password: hashedPassword,
    role: "MEMBER",
  },
});

// READ - Äá»c dá»¯ liá»‡u
// Láº¥y má»™t user
const user = await prisma.user.findUnique({
  where: { id: "user-id" },
});

// Láº¥y user kÃ¨m relations
const userWithProjects = await prisma.user.findUnique({
  where: { id: "user-id" },
  include: {
    projects: {
      include: {
        project: true,
      },
    },
  },
});

// Láº¥y nhiá»u users vá»›i filter
const admins = await prisma.user.findMany({
  where: { role: "ADMIN" },
  orderBy: { createdAt: "desc" },
  take: 10, // LIMIT 10
  skip: 0,  // OFFSET 0
});

// UPDATE - Cáº­p nháº­t
const updatedUser = await prisma.user.update({
  where: { id: "user-id" },
  data: { role: "PM" },
});

// DELETE - XÃ³a
await prisma.user.delete({
  where: { id: "user-id" },
});

// UPSERT - Táº¡o náº¿u chÆ°a cÃ³, cáº­p nháº­t náº¿u Ä‘Ã£ tá»“n táº¡i
const user = await prisma.user.upsert({
  where: { email: "trung@email.com" },
  update: { name: "Trung Updated" },
  create: {
    email: "trung@email.com",
    name: "Trung",
    password: hashedPassword,
  },
});
```

#### 3.1.3. Prisma Migrations

```bash
# Táº¡o migration má»›i sau khi thay Ä‘á»•i schema
npx prisma migrate dev --name add_user_avatar

# Ãp dá»¥ng migration cho production
npx prisma migrate deploy

# Reset database (XÃ“A TOÃ€N Bá»˜ Dá»® LIá»†U)
npx prisma migrate reset

# Generate Prisma Client
npx prisma generate

# Má»Ÿ Prisma Studio Ä‘á»ƒ xem database
npx prisma studio
```

#### Thá»i gian há»c: **2 tuáº§n**

---

### 3.2. Server Actions (Next.js 15)

Server Actions thay tháº¿ API Routes truyá»n thá»‘ng, cho phÃ©p gá»i hÃ m server trá»±c tiáº¿p tá»« client.

#### Cáº¥u trÃºc thÆ° má»¥c:
```
src/
â”œâ”€â”€ actions/
â”‚   â”œâ”€â”€ user.actions.ts
â”‚   â”œâ”€â”€ project.actions.ts
â”‚   â””â”€â”€ task.actions.ts
```

#### VÃ­ dá»¥ Server Action:

```typescript
// src/actions/user.actions.ts
"use server";

import { prisma } from "@/lib/prisma";
import { auth } from "@/lib/auth";
import { revalidatePath } from "next/cache";
import { z } from "zod";

// Schema validation vá»›i Zod
const CreateUserSchema = z.object({
  email: z.string().email("Email khÃ´ng há»£p lá»‡"),
  name: z.string().min(2, "TÃªn pháº£i cÃ³ Ã­t nháº¥t 2 kÃ½ tá»±"),
  password: z.string().min(6, "Máº­t kháº©u pháº£i cÃ³ Ã­t nháº¥t 6 kÃ½ tá»±"),
  role: z.enum(["ADMIN", "PM", "MEMBER"]).default("MEMBER"),
});

type CreateUserInput = z.infer<typeof CreateUserSchema>;

// Return type cho action
type ActionResult<T> = 
  | { success: true; data: T }
  | { success: false; error: string };

export async function createUser(
  input: CreateUserInput
): Promise<ActionResult<{ id: string }>> {
  try {
    // 1. Kiá»ƒm tra authentication
    const session = await auth();
    if (!session?.user) {
      return { success: false, error: "Báº¡n chÆ°a Ä‘Äƒng nháº­p" };
    }

    // 2. Kiá»ƒm tra authorization
    if (session.user.role !== "ADMIN") {
      return { success: false, error: "Báº¡n khÃ´ng cÃ³ quyá»n táº¡o user" };
    }

    // 3. Validate input
    const validatedData = CreateUserSchema.safeParse(input);
    if (!validatedData.success) {
      return { 
        success: false, 
        error: validatedData.error.errors[0].message 
      };
    }

    // 4. Kiá»ƒm tra email Ä‘Ã£ tá»“n táº¡i
    const existingUser = await prisma.user.findUnique({
      where: { email: validatedData.data.email },
    });
    if (existingUser) {
      return { success: false, error: "Email Ä‘Ã£ Ä‘Æ°á»£c sá»­ dá»¥ng" };
    }

    // 5. Hash password
    const hashedPassword = await bcrypt.hash(validatedData.data.password, 12);

    // 6. Táº¡o user
    const user = await prisma.user.create({
      data: {
        ...validatedData.data,
        password: hashedPassword,
      },
    });

    // 7. Revalidate cache
    revalidatePath("/admin/users");

    return { success: true, data: { id: user.id } };
  } catch (error) {
    console.error("Create user error:", error);
    return { success: false, error: "ÄÃ£ cÃ³ lá»—i xáº£y ra" };
  }
}
```

#### Gá»i Server Action tá»« Client:

```typescript
// src/app/admin/users/create/page.tsx
"use client";

import { createUser } from "@/actions/user.actions";
import { useTransition } from "react";

export default function CreateUserPage() {
  const [isPending, startTransition] = useTransition();

  async function handleSubmit(formData: FormData) {
    startTransition(async () => {
      const result = await createUser({
        email: formData.get("email") as string,
        name: formData.get("name") as string,
        password: formData.get("password") as string,
        role: "MEMBER",
      });

      if (result.success) {
        toast.success("Táº¡o user thÃ nh cÃ´ng!");
      } else {
        toast.error(result.error);
      }
    });
  }

  return (
    <form action={handleSubmit}>
      {/* Form fields */}
      <button type="submit" disabled={isPending}>
        {isPending ? "Äang táº¡o..." : "Táº¡o User"}
      </button>
    </form>
  );
}
```

#### Thá»i gian há»c: **1 tuáº§n**

---

### 3.3. Zod Validation

Zod lÃ  thÆ° viá»‡n validation type-safe, tÃ­ch há»£p hoÃ n háº£o vá»›i TypeScript.

```typescript
import { z } from "zod";

// Schema cÆ¡ báº£n
const UserSchema = z.object({
  email: z.string().email("Email khÃ´ng há»£p lá»‡"),
  name: z.string().min(2).max(50),
  age: z.number().int().positive().optional(),
  role: z.enum(["ADMIN", "PM", "MEMBER"]),
});

// Infer TypeScript type tá»« schema
type User = z.infer<typeof UserSchema>;

// Validate dá»¯ liá»‡u
const result = UserSchema.safeParse(inputData);
if (result.success) {
  // result.data cÃ³ type User
  console.log(result.data);
} else {
  // result.error chá»©a thÃ´ng tin lá»—i
  console.log(result.error.errors);
}

// Schema nÃ¢ng cao
const CreateProjectSchema = z.object({
  title: z.string()
    .min(3, "TiÃªu Ä‘á» pháº£i cÃ³ Ã­t nháº¥t 3 kÃ½ tá»±")
    .max(100, "TiÃªu Ä‘á» khÃ´ng Ä‘Æ°á»£c quÃ¡ 100 kÃ½ tá»±"),
  
  description: z.string().optional(),
  
  startDate: z.string()
    .transform((str) => new Date(str))
    .refine((date) => date > new Date(), {
      message: "NgÃ y báº¯t Ä‘áº§u pháº£i lá»›n hÆ¡n ngÃ y hiá»‡n táº¡i",
    }),
  
  members: z.array(z.string().cuid()).min(1, "Cáº§n Ã­t nháº¥t 1 thÃ nh viÃªn"),
});

// Schema vá»›i Ä‘iá»u kiá»‡n
const LoginSchema = z.object({
  email: z.string().email(),
  password: z.string().min(6),
  rememberMe: z.boolean().default(false),
});
```

#### Thá»i gian há»c: **3 ngÃ y**

---

### 3.4. Authentication vá»›i Auth.js v5

#### Cáº¥u hÃ¬nh Auth.js:

```typescript
// src/lib/auth.ts
import NextAuth from "next-auth";
import Credentials from "next-auth/providers/credentials";
import { prisma } from "./prisma";
import bcrypt from "bcryptjs";

export const { handlers, signIn, signOut, auth } = NextAuth({
  providers: [
    Credentials({
      name: "credentials",
      credentials: {
        email: { label: "Email", type: "email" },
        password: { label: "Password", type: "password" },
      },
      async authorize(credentials) {
        if (!credentials?.email || !credentials?.password) {
          return null;
        }

        const user = await prisma.user.findUnique({
          where: { email: credentials.email as string },
        });

        if (!user || !user.password) {
          return null;
        }

        const isValid = await bcrypt.compare(
          credentials.password as string,
          user.password
        );

        if (!isValid) {
          return null;
        }

        return {
          id: user.id,
          email: user.email,
          name: user.name,
          role: user.role,
        };
      },
    }),
  ],
  callbacks: {
    async jwt({ token, user }) {
      if (user) {
        token.role = user.role;
      }
      return token;
    },
    async session({ session, token }) {
      if (session.user) {
        session.user.id = token.sub!;
        session.user.role = token.role as string;
      }
      return session;
    },
  },
  pages: {
    signIn: "/login",
  },
});
```

#### Middleware báº£o vá»‡ routes:

```typescript
// src/middleware.ts
import { auth } from "@/lib/auth";
import { NextResponse } from "next/server";

export default auth((req) => {
  const { nextUrl } = req;
  const isLoggedIn = !!req.auth;

  // Routes cÃ´ng khai
  const publicRoutes = ["/login", "/register", "/"];
  
  // Routes cáº§n Ä‘Äƒng nháº­p
  const protectedRoutes = ["/dashboard", "/projects", "/tasks"];
  
  // Routes chá»‰ dÃ nh cho admin
  const adminRoutes = ["/admin"];

  const isPublicRoute = publicRoutes.includes(nextUrl.pathname);
  const isProtectedRoute = protectedRoutes.some((route) =>
    nextUrl.pathname.startsWith(route)
  );
  const isAdminRoute = adminRoutes.some((route) =>
    nextUrl.pathname.startsWith(route)
  );

  // ChÆ°a Ä‘Äƒng nháº­p mÃ  truy cáº­p protected route
  if (!isLoggedIn && isProtectedRoute) {
    return NextResponse.redirect(new URL("/login", nextUrl));
  }

  // KhÃ´ng pháº£i admin mÃ  truy cáº­p admin route
  if (isAdminRoute && req.auth?.user?.role !== "ADMIN") {
    return NextResponse.redirect(new URL("/dashboard", nextUrl));
  }

  return NextResponse.next();
});

export const config = {
  matcher: ["/((?!api|_next/static|_next/image|favicon.ico).*)"],
};
```

#### Thá»i gian há»c: **1 tuáº§n**

---

## 4. Lá»™ trÃ¬nh há»c táº­p 3 thÃ¡ng

### ğŸ“… ThÃ¡ng 1: XÃ¢y dá»±ng ná»n táº£ng

| Tuáº§n | Ná»™i dung | Output |
|------|----------|--------|
| **Tuáº§n 1** | TypeScript cÆ¡ báº£n Ä‘áº¿n nÃ¢ng cao | HoÃ n thÃ nh cÃ¡c bÃ i táº­p TypeScript trÃªn TypeScript Playground |
| **Tuáº§n 2** | SQL & PostgreSQL | Viáº¿t Ä‘Æ°á»£c cÃ¡c cÃ¢u query CRUD, JOIN |
| **Tuáº§n 3** | Prisma Schema & Migrations | Tá»± thiáº¿t káº¿ schema cho má»™t app Ä‘Æ¡n giáº£n |
| **Tuáº§n 4** | Prisma Client CRUD | Viáº¿t Ä‘Æ°á»£c táº¥t cáº£ cÃ¡c loáº¡i query vá»›i Prisma |

### ğŸ“… ThÃ¡ng 2: XÃ¢y dá»±ng á»©ng dá»¥ng

| Tuáº§n | Ná»™i dung | Output |
|------|----------|--------|
| **Tuáº§n 5** | Next.js App Router basics | Hiá»ƒu cáº¥u trÃºc folder, Server vs Client Components |
| **Tuáº§n 6** | Server Actions + Zod | Viáº¿t Ä‘Æ°á»£c cÃ¡c action CRUD vá»›i validation |
| **Tuáº§n 7** | Auth.js + Middleware | Implement authentication flow hoÃ n chá»‰nh |
| **Tuáº§n 8** | Mini Project #1 | XÃ¢y dá»±ng app Todo vá»›i Auth + CRUD |

### ğŸ“… ThÃ¡ng 3: NÃ¢ng cao & Thá»±c chiáº¿n

| Tuáº§n | Ná»™i dung | Output |
|------|----------|--------|
| **Tuáº§n 9** | Error Handling & Logging | Implement error boundary, logging system |
| **Tuáº§n 10** | Testing vá»›i Vitest | Viáº¿t unit test cho Server Actions |
| **Tuáº§n 11** | Performance & Caching | Hiá»ƒu vá» revalidation, ISR, caching strategies |
| **Tuáº§n 12** | Mini Project #2 | XÃ¢y dá»±ng app quáº£n lÃ½ task vá»›i nhiá»u user |

---

## 5. TÃ i nguyÃªn há»c táº­p

### ğŸ“š TÃ i liá»‡u chÃ­nh thá»©c (Miá»…n phÃ­)
| CÃ´ng nghá»‡ | Link | Ghi chÃº |
|-----------|------|---------|
| TypeScript | [typescriptlang.org/docs](https://www.typescriptlang.org/docs/) | Äá»c Handbook |
| Prisma | [prisma.io/docs](https://www.prisma.io/docs/) | Äá»c Getting Started + Concepts |
| Next.js | [nextjs.org/docs](https://nextjs.org/docs) | Focus vÃ o App Router |
| Auth.js | [authjs.dev](https://authjs.dev/) | Äá»c pháº§n Getting Started |
| Zod | [zod.dev](https://zod.dev/) | Äá»c README lÃ  Ä‘á»§ |

### ğŸ¥ Video Courses (Khuyáº¿n nghá»‹)
| KhÃ³a há»c | Ná»n táº£ng | Ná»™i dung |
|----------|----------|----------|
| **The Net Ninja - Next.js 14** | YouTube | Miá»…n phÃ­, cÆ¡ báº£n |
| **Prisma Course** | YouTube (Web Dev Simplified) | Prisma tá»« A-Z |
| **TypeScript Full Course** | YouTube (Dave Gray) | TypeScript chi tiáº¿t |

### ğŸ› ï¸ Tools cáº§n cÃ i Ä‘áº·t
```bash
# IDE
VS Code (báº¯t buá»™c)

# Extensions VS Code quan trá»ng
- Prisma
- ESLint
- Prettier
- TypeScript Importer
- GitLens

# Database GUI
- DBeaver hoáº·c TablePlus
- Prisma Studio (npx prisma studio)

# API Testing
- Postman hoáº·c Thunder Client (VS Code extension)
```

---

## 6. Checklist Ä‘Ã¡nh giÃ¡ nÄƒng lá»±c

### Level 1: Beginner (Sau 1 thÃ¡ng)
- [ ] Viáº¿t Ä‘Æ°á»£c TypeScript vá»›i Interface, Types, Generics
- [ ] Viáº¿t Ä‘Æ°á»£c SQL query cÆ¡ báº£n (SELECT, INSERT, UPDATE, DELETE, JOIN)
- [ ] Táº¡o Ä‘Æ°á»£c Prisma schema vÃ  cháº¡y migration
- [ ] Thá»±c hiá»‡n Ä‘Æ°á»£c CRUD vá»›i Prisma Client

### Level 2: Intermediate (Sau 2 thÃ¡ng)
- [ ] PhÃ¢n biá»‡t Ä‘Æ°á»£c Server Components vs Client Components
- [ ] Viáº¿t Ä‘Æ°á»£c Server Actions vá»›i Zod validation
- [ ] Implement Ä‘Æ°á»£c authentication vá»›i Auth.js
- [ ] Báº£o vá»‡ routes vá»›i middleware
- [ ] Xá»­ lÃ½ Ä‘Æ°á»£c errors vÃ  edge cases

### Level 3: Advanced (Sau 3 thÃ¡ng)
- [ ] Tá»‘i Æ°u Ä‘Æ°á»£c query vá»›i Prisma (select, include, pagination)
- [ ] Implement Ä‘Æ°á»£c RBAC (Role-Based Access Control)
- [ ] Viáº¿t Ä‘Æ°á»£c unit tests vá»›i Vitest
- [ ] Hiá»ƒu vÃ  Ã¡p dá»¥ng Ä‘Æ°á»£c caching strategies
- [ ] Debug vÃ  fix Ä‘Æ°á»£c production issues

---

## ğŸ’¡ Máº¹o Ä‘á»ƒ tiáº¿n bá»™ nhanh

### 1. Há»c qua dá»± Ã¡n thá»±c táº¿
> Äá»«ng chá»‰ Ä‘á»c docs, hÃ£y code song song. Má»—i khÃ¡i niá»‡m há»c Ä‘Æ°á»£c, hÃ£y viáº¿t code thá»­ ngay.

### 2. Äá»c code cá»§a ngÆ°á»i khÃ¡c
> Clone cÃ¡c repo open-source dÃ¹ng Next.js + Prisma Ä‘á»ƒ há»c cÃ¡ch organize code.

### 3. Debug lÃ  báº¡n
> Khi gáº·p lá»—i, Ä‘á»«ng copy paste tá»« StackOverflow ngay. HÃ£y Ä‘á»c error message, hiá»ƒu nguyÃªn nhÃ¢n.

### 4. Type Safety lÃ  Æ°u tiÃªn
> Äá»«ng bao giá» dÃ¹ng `any`. Náº¿u TypeScript bÃ¡o lá»—i, hÃ£y fix type thay vÃ¬ bypass.

### 5. Commit thÆ°á»ng xuyÃªn
> Má»—i tÃ­nh nÄƒng nhá» hoÃ n thÃ nh, hÃ£y commit. Äiá»u nÃ y giÃºp báº¡n track Ä‘Æ°á»£c tiáº¿n Ä‘á»™ vÃ  rollback khi cáº§n.

---

## ğŸ“ Há»— trá»£

Khi gáº·p khÃ³ khÄƒn, hÃ£y:
1. Äá»c láº¡i docs chÃ­nh thá»©c
2. Search trÃªn StackOverflow / GitHub Issues
3. Há»i trong team chat
4. Äá»c file `Readme/07_implementation-plan-novawork-hub.md` Ä‘á»ƒ hiá»ƒu context dá»± Ã¡n

---

> **LÆ°u Ã½ cuá»‘i**: ÄÃ¢y lÃ  lá»™ trÃ¬nh gá»£i Ã½. TÃ¹y vÃ o ná»n táº£ng vÃ  tá»‘c Ä‘á»™ há»c cá»§a báº¡n, thá»i gian cÃ³ thá»ƒ ngáº¯n hÆ¡n hoáº·c dÃ i hÆ¡n. Äiá»u quan trá»ng lÃ  **hiá»ƒu sÃ¢u** chá»© khÃ´ng pháº£i há»c nhanh.

*Cáº­p nháº­t láº§n cuá»‘i: 24/12/2024*
